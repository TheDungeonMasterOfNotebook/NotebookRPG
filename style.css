/* Full build styles (Stage A + B) */
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:#0e1116;color:#e6eef8;overflow:hidden}
a{color:inherit}
header{background:linear-gradient(90deg,#0b1220,#10202a);padding:12px;text-align:center}
h1{margin:0;font-size:18px;color:#e9f2ff}

/* Parallax background */
#bg{position:fixed;inset:0;z-index:0;overflow:hidden}
.layer{position:absolute;left:50%;transform:translateX(-50%);width:140%;height:140%;background-repeat:no-repeat;background-position:center center;pointer-events:none;opacity:0.95}
.layer.back{z-index:0;filter:blur(1px);transform-origin:center top}
.layer.mid{z-index:1}
.layer.front{z-index:2;mix-blend-mode:overlay;opacity:0.9}

/* Game container */
#game{position:relative;z-index:4;max-width:1120px;margin:20px auto;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;box-shadow:0 12px 40px rgba(0,0,0,0.6);overflow:auto}
main#main-wrap{display:flex;flex-direction:column;gap:12px}

/* Layout */
#top-row{display:flex;gap:12px;align-items:flex-start}
#player-panel{flex:1;display:flex;gap:12px}
#player-info{flex:1;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));border-radius:8px;padding:12px;border:1px solid rgba(255,255,255,0.03)}
.player-top{display:flex;gap:12px;align-items:center}
.hp-row{display:flex;align-items:center;gap:8px;margin-top:8px}
.hp-bar{flex:1;background:rgba(255,255,255,0.02);border-radius:10px;height:16px;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
.hp-fill{height:100%;background:linear-gradient(90deg,#ffd7a6,#ff7d4b);transition:width .5s ease}
.hp-row #player-hp-small{width:120px;font-size:13px;color:#bcd}

/* XP */
.xp-row{display:flex;align-items:center;gap:12px;margin-top:8px}
.xp-bar{height:12px;background:rgba(255,255,255,0.02);border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
.xp-fill{height:100%;background:linear-gradient(90deg,#8cc4ff,#4f7ef6);transition:width .6s ease}
.levelup-badge{padding:6px 10px;border-radius:20px;background:linear-gradient(90deg,#f59e0b,#f97316);color:white;font-weight:700;opacity:0;transform:scale(0.9)}
.stats-row{display:flex;gap:12px;margin-top:8px;font-size:14px;color:#cfe4ff}

/* aces */
.aces-row{margin-top:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap;color:#fff}
.ace-pill{padding:6px 10px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);font-weight:700;background:rgba(0,0,0,0.12)}
.ace-pill.clubs{background:linear-gradient(180deg,#203a1f,#13311a)}
.ace-pill.diamonds{background:linear-gradient(180deg,#17384a,#0f2740)}
.ace-pill.hearts{background:linear-gradient(180deg,#5a1b1b,#3b0f0f)}
.ace-pill.spades{background:linear-gradient(180deg,#201b2b,#0f0b15)}
.ace-total{width:100%;margin-top:6px;color:#dfefff;font-weight:600}

/* companions & status */
.companion-row{margin-top:8px}
.status-row{margin-top:8px}

/* equipment */
#equipment-panel{width:300px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));border-radius:8px;padding:10px;border:1px solid rgba(255,255,255,0.03)}
.equip-slot{padding:8px;border-radius:6px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02);margin-bottom:8px;font-size:14px;position:relative}
.equip-slot .rune{position:absolute;right:8px;top:4px;width:28px;height:28px;pointer-events:none;opacity:0}

/* merchant */
#merchant-panel{width:360px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));border-radius:8px;padding:10px;border:1px solid rgba(255,255,255,0.03)}
.merchant-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.01);margin-bottom:6px}
.merchant-item button{padding:6px 8px;border-radius:6px;border:none;background:#2b3742;color:#fff;cursor:pointer}

/* enchant modal */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:60}
.modal.hidden{display:none}
.modal-card{background:#061219;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.05);width:420px}
.modal-actions{display:flex;gap:8px;margin-top:10px}
.modal-actions button{padding:8px;border-radius:8px;border:none;background:#2b3742;color:white;cursor:pointer}

/* combat */
#combat{margin-top:12px;text-align:center;position:relative;z-index:5}
#monster-area{min-height:160px}
.monster{display:inline-block;width:78%;padding:12px;border-radius:10px;background:linear-gradient(180deg,#092028,#0b2330);border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 30px rgba(0,0,0,0.6);position:relative}
.monster.spawn{animation:spawn .36s cubic-bezier(.2,.9,.2,1)}
@keyframes spawn{from{transform:scale(.92);opacity:0}to{transform:scale(1);opacity:1}}
.monster .status-icons{position:absolute;right:10px;top:8px;display:flex;gap:6px}

/* actions */
#actions{display:flex;gap:12px;justify-content:center;margin-top:8px}
#actions button{padding:8px 14px;border-radius:8px;border:none;background:#203240;color:white;cursor:pointer}
#actions button:disabled{opacity:0.5;cursor:not-allowed}

/* meta row */
#meta-row{display:flex;gap:12px;margin-top:12px}
#queue,#loot-section{flex:1;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));border-radius:8px;padding:10px;border:1px solid rgba(255,255,255,0.03)}
#monster-queue{display:flex;flex-wrap:wrap;gap:8px}
.queue-card{padding:6px 10px;border-radius:8px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02);font-size:13px}

#loot-list{margin-top:8px}
.item{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.01);margin-bottom:6px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;position:relative}
.item .actions{display:flex;gap:6px}
.item .rune{position:absolute;left:8px;top:8px;width:46px;height:46px;pointer-events:none;opacity:0}
.item:hover{transform:translateY(-3px);transition:all .14s}

/* popups and particles */
#fx-layer{position:fixed;right:18px;top:90px;z-index:80;pointer-events:none}
.float-popup{background:linear-gradient(90deg,#fff,#dbeeff);color:#041018;padding:6px 10px;border-radius:10px;margin-top:8px;box-shadow:0 8px 24px rgba(0,0,0,0.5);transform:translateY(8px);opacity:0;transition:all .6s}
.float-popup.show{transform:translateY(0);opacity:1}
.particle{position:absolute;width:8px;height:8px;border-radius:50%;background:linear-gradient(90deg,#ffd7a6,#ff7d4b);opacity:0.9;pointer-events:none;filter:blur(0.6px);transition:all 1.2s cubic-bezier(.2,.8,.2,1)}

/* rune animation */
@keyframes runeSpin {0%{transform:rotate(0deg) scale(0.9);opacity:0.6}50%{transform:rotate(180deg) scale(1.06);opacity:1}100%{transform:rotate(360deg) scale(0.98);opacity:0.6}}
.rune-anim{animation:runeSpin 2.6s linear infinite;mix-blend-mode:screen;}
.enchant-glow.common{box-shadow:0 0 8px rgba(180,180,200,0.08) inset}
.enchant-glow.uncommon{box-shadow:0 0 12px rgba(52,211,153,0.08) inset}
.enchant-glow.rare{box-shadow:0 0 14px rgba(59,130,246,0.09) inset}
.enchant-glow.epic{box-shadow:0 0 18px rgba(168,85,247,0.11) inset}
.enchant-glow.legendary{box-shadow:0 0 22px rgba(245,158,11,0.14) inset}
.enchant-glow.mythic{box-shadow:0 0 28px rgba(239,68,68,0.16) inset}

/* UI overlay & small util */
.ui-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:120;background:rgba(2,6,23,0.6)}
.ui-overlay.hidden{display:none}
.splash-card{background:#061219;padding:20px;border-radius:12px;color:#dfeaff}
.small{font-size:12px;color:#9fb4d6}
.scene{transition:opacity .45s ease, transform .45s ease}
.scene--visible{opacity:1;transform:translateY(0)}
.scene--hidden{opacity:0;transform:translateY(8px);pointer-events:none}
