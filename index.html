<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notebook RPG</title>
<link rel="stylesheet" href="style.css">

<style>
  body {
    margin: 0;
    padding: 0;
    font-family: "Courier New", monospace;
    background: linear-gradient(180deg, #f7f1e3, #dcd0b9);
    color: #2d1b00;
    overflow: hidden;
  }

  #loadingScreen {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: #f7f1e3;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    transition: opacity 0.6s ease;
    z-index: 9999;
  }

  #loadingScreen.fadeOut {
    opacity: 0;
    pointer-events: none;
  }

  #loadingText {
    font-size: 1.5rem;
    margin-bottom: 20px;
    animation: pulse 1.5s infinite ease-in-out;
  }

  @keyframes pulse {
    0% { opacity: 0.3; }
    50% { opacity: 1; }
    100% { opacity: 0.3; }
  }

  canvas, #gameUI {
    opacity: 0;
    transition: opacity 1s ease;
  }

  canvas.active, #gameUI.active {
    opacity: 1;
  }
</style>
</head>
<body>

<!-- Loading Splash / Redirect -->
<div id="loadingScreen">
  <div id="loadingText">Opening your notebook...</div>
  <div id="subText">Preparing your adventure...</div>
</div>

<!-- Main Game Content -->
<div id="gameContainer">
  <canvas id="gameCanvas"></canvas>
  <div id="gameUI">
    <!-- Game UI elements get injected dynamically from game.js -->
  </div>
</div>

<script>
/* Check for existing character */
const playerData = localStorage.getItem("NotebookRPG_Player");

if (!playerData) {
  // No save found → redirect to creation page
  window.location.href = "character_create.html";
} else {
  // Player exists → proceed to load game
  const loadingScreen = document.getElementById("loadingScreen");
  const gameUI = document.getElementById("gameUI");
  const canvas = document.getElementById("gameCanvas");

  // Add immersive intro effect
  setTimeout(() => {
    document.getElementById("loadingText").textContent = "Welcome back, adventurer...";
  }, 1000);

  setTimeout(() => {
    loadingScreen.classList.add("fadeOut");
    canvas.classList.add("active");
    gameUI.classList.add("active");
  }, 2000);

  // Initialize game logic after short delay
  setTimeout(() => {
    const script = document.createElement("script");
    script.src = "game.js";
    document.body.appendChild(script);
  }, 2500);
}
</script>
</body>
</html>
